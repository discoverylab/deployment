"use strict";var app=angular.module("discoveryApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap","ngTouch","ngDraggable","ngTimer","ngIdle","ngd3","LocalStorageModule"]).config(["$keepaliveProvider","$idleProvider",function(a,b){b.idleDuration(1200),b.warningDuration(30),a.interval(10)}]).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/"}),b.html5Mode(!0)}]).run(["$rootScope","$location","userFactory",function(a,b,c){a.$on("$routeChangeStart",function(a,d,e){var f=d.templateUrl;d.access||f.indexOf("admin")>-1?!d.access&&f.indexOf("admin")>-1?c.isAdminLoggedIn()||b.path("/admin-login"):c.isLoggedIn()?b.path():c.isAdminLoggedIn()&&b.path("/admin"):c.isLoggedIn()||b.path("/")})}]);angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/admin",{templateUrl:"app/admin/partials/admin.html",access:!1}).when("/admin-login",{templateUrl:"app/admin/partials/admin-login.html",access:!0}).when("/admin/settings",{templateUrl:"app/admin/partials/admin-management.html",access:!1}).when("/admin/lab/:id",{templateUrl:"app/admin/partials/admin-create.html",access:!1}).when("/admin/question/:id",{templateUrl:"app/admin/partials/admin-addQuestion.html",access:!1}).when("/admin/students",{templateUrl:"app/admin/partials/admin-students.html",access:!1}).when("/admin/students/profile/:id",{templateUrl:"app/admin/partials/admin-student-profile.html",access:!1}).when("/admin/students/profile/report/:userid/:attemptid",{templateUrl:"app/admin/partials/admin-student-report.html",access:!1})}]),app.factory("adminFactory",["$http","$cookieStore",function(a,b){var c="https://api.discovery.a2c2.asu.edu";return{adminLogin:function(d){return a({headers:{"Content-Type":"application/json"},url:c+"/adminLogin",method:"POST",data:d}).success(function(a){console.log("Admin logged in: "+a.name),b.put("adminloggedin","true"),b.put("userid",a.id)}).error(function(a){console.log("Admin login failed.."+a)})},addInstructor:function(b){return a({headers:{"Content-Type":"application/json"},url:c+"/addInstructor",method:"POST",data:b}).success(function(a){console.log("instructor added: "+a.name)}).error(function(a){console.log("Add instructor failed..")})},getAllInstructors:function(){return a({url:c+"/getInstructors",method:"GET"}).success(function(a){return console.log("Got all Instructors.."),a}).error(function(a){console.log("Get all Instructors failed..")})},deleteInstructor:function(b){return a({url:c+"/deleteInstructor/"+b,method:"GET"}).success(function(a){console.log("Instructor deleted..")}).error(function(a){console.log("delete Lab failed..")})},getAllStudents:function(){return a({url:c+"/getAllUsers",method:"GET"}).success(function(a){return console.log("Got all Users!"),a}).error(function(a){console.log("Get all Users failed..")})},addQuiz:function(b,d){return a({headers:{"Content-Type":"application/json"},url:c+"/addQuiz/"+b,method:"POST",data:d}).success(function(a){return console.log("quiz added.."),a}).error(function(a){console.log("add quiz failed..")})},deleteQuiz:function(b,d){return a({url:c+"/deleteQuiz/"+b+"/"+d,method:"GET"}).success(function(a){return console.log("quiz delete.."),a}).error(function(a){console.log("delete quiz failed..")})},addLab:function(b){return a({headers:{"Content-Type":"application/json"},url:c+"/addLab",method:"POST",data:b}).success(function(a){return console.log("Lab Added.."),a}).error(function(a){console.log("Adding Lab failed..")})},saveLab:function(b){return a({headers:{"Content-Type":"application/json"},url:c+"/saveLab",method:"POST",data:b}).success(function(a){return console.log("Lab saved.."),a}).error(function(a){console.log("saving Lab failed..")})},deleteLab:function(b){return a({headers:{"Content-Type":"application/json"},url:c+"/deleteLab",method:"POST",data:b}).success(function(a){console.log("Lab deleted..")}).error(function(a){console.log("delete Lab failed..")})},saveQuestion:function(b){return a({headers:{"Content-Type":"application/json"},url:c+"/saveQuestion",method:"POST",data:b}).success(function(a){return console.log("Got Question .."),a}).error(function(a){console.log("Get Question failed..")})}}}]),app.controller("AdminCtrl",["$scope","$q","$location","adminFactory","labsFactory",function(a,b,c,d,e){function f(){a.lab={id:"",labname:"",labdescription:"",golive:!1,quizzes:[]},e.getAllLabs().success(function(b){a.labs=b}).error(function(b){a.servicerror=!0})}function g(){var a=$("#successmsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}function h(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var i=null;f(),a.createLab=function(){var e=b.defer(),f=e.promise;f.then(function(b){d.addLab(a.lab).success(function(b){a.lab=b,g(),c.path("/admin/lab/"+b.id)}).error(function(a){h()})},function(a){h()}),$("#createLabModal").modal("hide"),$("#createLabModal").on("hidden.bs.modal",function(){e.resolve("success")})},a.editlab=function(a){c.path("/admin/lab/"+a)},a.deletelab=function(a){i=a,$("#deleteModal").modal("show")},a.deletelabconfirm=function(){var a=b.defer(),c=a.promise;c.then(function(a){d.deleteLab(i).success(function(a){f(),g()}).error(function(a){f(),h()})},function(a){h()}),$("#deleteModal").modal("hide"),$("#deleteModal").on("hidden.bs.modal",function(){a.resolve("success")})},a.donotdeletelab=function(){i=null,$("#deleteModal").modal("hide")}}]),app.controller("AdminAddQuestionCtrl",["$scope","$q","$routeParams","labsFactory","quizFactory","adminFactory",function(a,b,c,d,e,f){function g(){console.log("Id is "+c.id),j=c.id;var f=b.defer(),g=f.promise;g.then(function(b){d.getLab(a.question.labid).success(function(b){a.lab=b}).error(function(a){i()})},function(a){i()}),e.getQuestion(j).success(function(b){a.question=b,f.resolve("success")}).error(function(a){i()})}function h(){var a=$("#successmsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}function i(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var j=null;a.emptysubquestion={subquestion:"",correctanswer:"",answerrange:0,optiontype:"",options:[]},a.optiontypes=["RANGE","CHOICE","DRAGDROP","TEXT"],a.addSubQuestion=function(){var b=angular.copy(a.emptysubquestion);a.question.subquestions.push(b)},a.deleteSubQuestion=function(b){var c=a.question.subquestions.indexOf(b);a.question.subquestions.splice(c,1)},a.addChoice=function(a,b){angular.equals(b,"RANGE")?(a.options.length=0,a.options.length=3):angular.equals(b,"CHOICE")?(a.options.length=0,a.options.length=4):angular.equals(b,"DRAGDROP")?(a.options.length=0,a.options.length=4):a.options.length=0},a.saveQuestion=function(){f.saveQuestion(a.question).success(function(b){a.question=b,h()}).error(function(a){i()})},g()}]),app.controller("AdminCreateCtrl",["$scope","$q","$routeParams","labsFactory","adminFactory",function(a,b,c,d,e){function f(){console.log("Id is "+c.id),i=c.id,d.getLab(i).success(function(b){a.lab=b}).error(function(a){h()})}function g(){var a=$("#successmsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}function h(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var i=null,j=null,k=null;a.addquiz={id:"",quizname:"",quizdescription:""},a.addQuiz=function(){var c=b.defer(),d=c.promise;d.then(function(b){e.addQuiz(i,a.addquiz).success(function(b){a.lab=b,g(),a.addquiz={id:"",quizname:"",quizdescription:""}}).error(function(a){h()})},function(a){h()}),$("#addQuizModal").modal("hide"),$("#addQuizModal").on("hidden.bs.modal",function(){c.resolve("success")})},a.editQuiz=function(b){a.equiz=b,$("#editQuizModal").modal("toggle")},a.updateQuiz=function(){var c=b.defer(),d=c.promise;d.then(function(b){e.saveLab(a.lab).success(function(b){a.lab=b,g()}).error(function(a){h()})},function(a){alert("try again")}),$("#editQuizModal").modal("hide"),$("#editQuizModal").on("hidden.bs.modal",function(){c.resolve("success")})},a.deleteQuizConfirm=function(a,b){j=a,k=b,$("#deleteQuizModal").modal("toggle")},a.deleteQuiz=function(){var c=b.defer(),d=c.promise;d.then(function(b){e.deleteQuiz(j,k).success(function(b){a.lab=b,j=null,k=null,g()}).error(function(a){j=null,k=null,h()})},function(a){h()}),$("#deleteQuizModal").modal("hide"),$("#deleteQuizModal").on("hidden.bs.modal",function(){c.resolve("success")})},a.saveLab=function(){e.addLab(a.lab).success(function(b){a.lab=b,g()}).error(function(a){h()})},a.getLab=function(){var c=b.defer(),e=c.promise;e.then(function(b){d.getLab(i).success(function(b){a.lab=b}).error(function(a){h()})},function(a){h()}),$("#editQuizModal").modal("hide"),$("#editQuizModal").on("hidden.bs.modal",function(){c.resolve("success")})},f()}]),app.controller("AdminHeaderCtrl",["$scope","$location","userFactory",function(a,b,c){a.logout=function(){c.logout(),b.path("/admin-login")}}]),app.controller("AdminLoginCtrl",["$scope","$location","userFactory","adminFactory",function(a,b,c,d){a.admin={email:"",name:""},a.loading=!1,a.serviceerror=!1,a.submitAdminForm=function(c){a.loading=!0,c&&d.adminLogin(a.admin).success(function(c){a.loading=!1,a.serviceerror=!1,b.path("/admin")}).error(function(b){a.loading=!1,a.serviceerror=!0})},a.logout=function(){c.logout(),b.path("/admin-login")}}]),app.controller("AdminSettingsCtrl",["$scope","adminFactory",function(a,b){function c(){b.getAllInstructors().success(function(b){a.instructors=b}).error(function(b){a.servicerror=!0})}function d(){var a=$("#successmsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}function e(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}a.deleteloading=!1,a.instructor={id:"",email:"",name:""},a.loading=!1,a.serviceerror=!1,a.submitInstructorForm=function(f){a.loading=!0,f&&b.addInstructor(a.instructor).success(function(b){a.loading=!1,a.serviceerror=!1,a.instructor={email:"",name:""},a.addInstructorForm.$setPristine(),c(),d()}).error(function(b){a.loading=!1,a.serviceerror=!0,e()})},a.deleteInstructor=function(f){a.deleteloading=!0,b.deleteInstructor(f).success(function(b){a.deleteloading=!1,c(),d()}).error(function(b){a.deleteloading=!1,e()})},c()}]),app.controller("AdminStudentsCtrl",["$scope","adminFactory",function(a,b){function c(){a.typevalue="",b.getAllStudents().success(function(b){a.students=b}).error(function(b){a.servicerror=!0})}c()}]),app.controller("LoginCtrl",["$scope","$routeParams","$location","$window","LoginFactory",function(a,b,c,d,e){function f(){g=b.labid,h=b.quizid}var g=null,h=null;f(),a.showasu=!0,a.asuuser={userid:"",password:""},a.guestuser={id:"",email:"",name:""},a.loading=!1,a.serviceerror=!1,a.toggleclass=function(b){"asu"===b?(a.showasu=!0,a.guestuser={email:"",name:""},a.guestForm.$setPristine(),a.loading=!1,a.serviceerror=!1):(a.showasu=!1,a.asuuser={userid:"",password:""},a.loading=!1,a.serviceerror=!1)},a.casAuth=function(){d.location.href="https://weblogin.asu.edu/cas/login?service=https://discovery.a2c2.asu.edu/?quizid="+h},a.submitGuestForm=function(b){a.loading=!0,b&&e.guestUserLogin(a.guestuser).success(function(b){a.loading=!1,a.serviceerror=!1,c.path("/consent/"+g+"/"+h)}).error(function(b){a.loading=!1,a.serviceerror=!0})}}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/login/:labid/:quizid",{templateUrl:"app/login/login.html",controller:"LoginCtrl",access:!0})}]),app.controller("ConsentCtrl",["$scope","$q","$location","$routeParams","$cookieStore","localStorageService","labsFactory","userFactory","quizFactory",function(a,b,c,d,e,f,g,h,i){function j(){l=d.labid,m=d.quizid,g.getLab(l).success(function(b){a.lab=b}).error(function(a){k()}),a.user=h.getLocalUser()}function k(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var l=null,m=null;j(),a.startLab=function(){var d,g=b.defer(),h=g.promise;h.then(function(a){c.path("/quiz/"+m+"/"+d+"/all")},function(a){}),i.createAttemptDoc(m,a.user.id).success(function(a){d=a.id,e.put("timer",0),i.getQuestion(m).success(function(a){var b=a;for(var c in b.subquestions)b.subquestions[c].correctanswer="NULL";f.remove(a.id),f.set(b.id,b),g.resolve("success")}).error(function(a){g.reject("failure"),k()})}).error(function(a){g.reject("failure"),k()})}}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/consent/:labid/:quizid",{templateUrl:"app/consent/consent.html",controller:"ConsentCtrl",access:!1})}]),app.controller("HomeCtrl",["$scope","$q","$cookieStore","$routeParams","$location","$window","$anchorScroll","LoginFactory","quizFactory",function(a,b,c,d,e,f,g,h,i){function j(){a.areCookiesEnabled=!1,c.put("TestCookie","TestCookieText"),a.cookieValue=c.get("TestCookie"),a.cookieValue?(c.remove("TestCookie"),a.areCookiesEnabled=!0):$("#noCookiesModal").modal("show")}function k(){var a=$("#successmsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}function l(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var m=d.ticket,n=d.quizid;a.pageloading=!1,a.showasu=!0,a.guestuser={id:"",email:"",name:""},a.loading=!1,a.serviceerror=!1,m&&(a.pageloading=!0,h.validateTicket(m,n).success(function(c){if(n){var d=b.defer(),f=d.promise;f.then(function(b){a.pageloading=!1,k(),e.path("/consent/"+a.quiz.labid+"/"+n)},function(a){}),i.getQuestion(n).success(function(b){a.quiz=b,d.resolve("success")}).error(function(a){alert("Please try again")})}else setTimeout(function(){a.$evalAsync(function(){e.path("/labs").replace()})},2e3)}).error(function(b){a.pageloading=!1,l(),e.path("/")})),a.toggleclass=function(b){"asu"===b?(a.showasu=!0,a.guestuser={id:"",email:"",name:""},a.guestForm.$setPristine(),a.loading=!1,a.serviceerror=!1):(a.showasu=!1,a.loading=!1,a.serviceerror=!1)},a.casAuth=function(){f.location.href="https://weblogin.asu.edu/cas/login?service=https://discovery.a2c2.asu.edu"},a.gotoTop=function(){e.hash("section1"),g()},a.submitGuestForm=function(b){a.loading=!0,b&&h.guestUserLogin(a.guestuser).success(function(b){a.loading=!1,a.serviceerror=!1,e.path("/labs")}).error(function(b){a.loading=!1,a.serviceerror=!0})},j()}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/home/home.html",controller:"HomeCtrl",access:!0})}]),app.factory("LoginFactory",["$http","$q","$cookieStore","localStorageService","$window",function(a,b,c,d,e){var f="https://api.discovery.a2c2.asu.edu";return{guestUserLogin:function(b){return a({headers:{"Content-Type":"application/json"},url:f+"/userLogin",method:"POST",data:b}).success(function(a){c.put("loggedin","true"),c.put("userid",a.id),d.set(a.id,a)}).error(function(a){})},validateTicket:function(e,g){var h="api/asuproxy/ticket/"+e+"/quizid/"+g,i=null,j=b.defer(),k=j.promise;return k.then(function(b){return b.status?a({headers:{"Content-Type":"application/json"},url:f+"/userLogin",method:"POST",data:b.user}).success(function(a){a?(c.put("loggedin","true"),c.put("userid",a.id),d.set(a.id,a)):console.log("service error..")}).error(function(a){c.del("loggedin"),c.del("userid")}):(c.del("loggedin"),void c.del("userid"))},function(a){}),a({url:h,method:"GET"}).success(function(a){i=a,c.put("loggedin","true"),c.put("userid",i.user.id),j.resolve(i)}).error(function(a){})}}}]),app.controller("LabCtrl",["$scope","$q","$routeParams","labsFactory",function(a,b,c,d){function e(){g=c.id,d.getLab(g).success(function(b){a.lab=b}).error(function(a){f()})}function f(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var g=null;e()}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/lab/:id",{templateUrl:"app/lab/lab.html",controller:"LabCtrl",access:!1})}]),app.controller("LabsCtrl",["$scope","$location","localStorageService","labsFactory","userFactory",function(a,b,c,d,e){function f(){d.getAllLabs().success(function(b){a.labs=b}).error(function(b){a.servicerror=!0,g()}),a.user=e.getLocalUser(),null===a.user&&e.getUser().success(function(b){a.user=b}).error(function(a){g()})}function g(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}f(),a.startLab=function(a){b.path("/lab/"+a)}}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/labs",{templateUrl:"app/labs/labs.html",controller:"LabsCtrl",access:!1})}]),app.controller("ProfileCtrl",["$scope","$location","$routeParams","userFactory","labsFactory","quizFactory",function(a,b,c,d,e,f){function g(){i?(j=!0,d.getUserbyId(i).success(function(b){a.user=b}).error(function(a){h()})):(a.user=d.getLocalUser(),i=a.user.id),f.getReports(i).success(function(b){a.reports=b,e.getAllLabs().success(function(b){a.labs=b}).error(function(a){h()})}).error(function(a){h()})}function h(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}var i=c.id,j=!1;g(),a.showReport=function(a){j?b.path("/admin/students/profile/report/"+i+"/"+a):b.path("/report/"+a)}}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/profile",{templateUrl:"app/profile/profile.html",controller:"ProfileCtrl",access:!1})}]),app.controller("QuizCtrl",["$scope","$q","$routeParams","$cookieStore","localStorageService","$location","labsFactory","quizFactory",function(a,b,c,d,e,f,g,h){function i(){k=c.id,l=c.quizid,m="all"===c.quesid?c.quesid:c.quesid-1,a.question=h.getLocalQuestion(l),a.attempt=h.getLocalAttemptDoc(k),"all"==m?a.showall=!0:(a.showall=!1,a.currentquestion=a.question.subquestions[m],a.currentindex=m)}function j(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}a.errors=!1,a.currentquestion=null;var k=null,l=null,m=null;i(),a.gotoQuestion=function(a){f.path("/quiz/"+l+"/"+k+"/"+a)},a.next=function(a){f.path("/quiz/"+l+"/"+k+"/"+a)},a.prev=function(a){f.path("/quiz/"+l+"/"+k+"/"+a)},a.onDropComplete=function(b,c,d){a.attempt.subanswers[d].subanswer=b},a.saveAttempt=function(){a.attempt.subanswers[a.currentindex].saved=!0,e.set(a.attempt.id,a.attempt)},a.submitAnswer=function(){var c=b.defer(),e=c.promise;e.then(function(b){var c=a.attempt.subanswers[a.currentindex].subanswer,e=!0;""===c&&(e=!1),e?h.submitAnswer(a.attempt,m).success(function(b){a.attempt=b,a.errors=!1,a.attempt.submitstatus===!0&&(d.put("timer",0),f.path("/report/"+b.id))}).error(function(a){j()}):a.errors=!0},function(a){}),c.resolve("success")}}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/quiz/:quizid/:id/:quesid",{templateUrl:"app/quiz/quiz.html",controller:"QuizCtrl",access:!1})}]),app.controller("ReportCtrl",["$scope","$q","$routeParams","$cookieStore","userFactory","localStorageService","quizFactory","labsFactory",function(a,b,c,d,e,f,g,h){function i(){var i=c.attemptid,k=c.userid;a.user=e.getLocalUser(),a.Math=Math,a.user||e.getUserbyId(k).success(function(b){a.user=b}).error(function(a){j()});for(var l in f.keys())f.keys()[l]!=d.get("userid")&&f.remove(f.keys()[l]);g.getAttemptDoc(i).success(function(c){function d(){var b=a.report.submitcount/a.quiz.subquestions.length*100;a.attempted={percent:b,value:a.report.submitcount};var c=a.report.score/(10*a.quiz.subquestions.length)*100;a.score={percent:c,value:a.report.score};var d=(a.report.clock/a.quiz.subquestions.length/60).toFixed(2),e=d/a.report.clock*100*60;a.time={percent:e,value:d}}a.report=c,a.quiz=g.getLocalQuestion(a.report.quizid);var e=b.defer(),i=e.promise;a.quiz?e.resolve("success"):g.getQuestion(a.report.quizid).success(function(b){a.quiz=b,f.remove(b.id),e.resolve("success")}).error(function(a){j()}),i.then(function(b){h.getLab(a.quiz.labid).success(function(b){a.lab=b,d()}).error(function(a){j()})},function(a){j()})}).error(function(a){j()})}function j(){var a=$("#failuremsg");a.css({visibility:"visible",opacity:"1"}),setTimeout(function(){a.css({visibility:"hidden",opacity:"0"})},5e3)}i()}]),angular.module("discoveryApp").config(["$routeProvider",function(a){a.when("/report/:attemptid",{templateUrl:"app/report/report.html",controller:"ReportCtrl",access:!1})}]),angular.module("ngDraggable",[]).directive("ngDrag",["$rootScope","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){c.value=e.ngDrag;var f,g,h,i,j,k="ontouchstart"in document.documentElement,l="touchstart mousedown",m="touchmove mousemove",n="touchend mouseup",o=$(document),p=$(window),q=null,r=!1,s=null,t=b(e.ngDragSuccess)||null,u=function(){d.attr("draggable","false"),v(!0)},v=function(a){a&&(c.$on("$destroy",w),e.$observe("ngDrag",y),c.$watch(e.ngDragData,x),d.on(l,z),k||d.on("mousedown",function(){return!1}))},w=function(a){v(!1)},x=function(a,b){q=a},y=function(a,b){r=c.$eval(a)},z=function(a){r&&(k?(A(),s=setTimeout(function(){A(),B(a)},100),o.on(m,A),o.on(n,A)):B(a))},A=function(){clearTimeout(s),o.off(m,A),o.off(n,A)},B=function(b){r&&(b.preventDefault(),f=d.offset(),d.centerX=d.width()/2,d.centerY=d.height()/2,d.addClass("dragging"),g=b.pageX||b.originalEvent.touches[0].pageX,h=b.pageY||b.originalEvent.touches[0].pageY,i=g-d.centerX-p.scrollLeft(),j=h-d.centerY-p.scrollTop(),G(i,j),o.on(m,C),o.on(n,D),a.$broadcast("draggable:start",{x:g,y:h,tx:i,ty:j,element:d,data:q}))},C=function(b){r&&(b.preventDefault(),g=b.pageX||b.originalEvent.touches[0].pageX,h=b.pageY||b.originalEvent.touches[0].pageY,i=g-d.centerX-p.scrollLeft(),j=h-d.centerY-p.scrollTop(),G(i,j),a.$broadcast("draggable:move",{x:g,y:h,tx:i,ty:j,element:d,data:q}))},D=function(b){r&&(b.preventDefault(),a.$broadcast("draggable:end",{x:g,y:h,tx:i,ty:j,element:d,data:q,callback:E}),d.removeClass("dragging"),F(),o.off(m,C),o.off(n,D))},E=function(a){t&&c.$apply(function(){t(c,{$data:q,$event:a})})},F=function(){d.css({left:"",top:"",position:"","z-index":""})},G=function(a,b){d.css({left:a,top:b,position:"fixed","z-index":99999})};u()}}}]).directive("ngDrop",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(c,d,e){c.value=e.ngDrop;var f=!1,g=a(e.ngDropSuccess),h=function(){i(!0)},i=function(a){a&&(e.$observe("ngDrop",k),c.$on("$destroy",j),c.$on("draggable:start",l),c.$on("draggable:move",m),c.$on("draggable:end",n))},j=function(a){i(!1)},k=function(a,b){f=c.$eval(a)},l=function(a,b){f&&o(b.x,b.y,b.element)},m=function(a,b){f&&o(b.x,b.y,b.element)},n=function(a,d){f&&(o(d.x,d.y,d.element)&&(d.callback&&d.callback(a),b(function(){g(c,{$data:d.data,$event:a})})),p(!1,d.element))},o=function(a,b,c){var d=q(a,b);return p(d,c),d},p=function(a,b){a?(d.addClass("drag-enter"),b.addClass("drag-over")):(d.removeClass("drag-enter"),b.removeClass("drag-over"))},q=function(a,b){var c=d.offset();return c.right=c.left+d.outerWidth(),c.bottom=c.top+d.outerHeight(),a>=c.left&&a<=c.right&&b<=c.bottom&&b>=c.top};h()}}}]).directive("ngDragClone",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(a,b,c){var d;a.clonedData={};var e=function(){d=$(b.find("img")),b.attr("draggable","false"),d.attr("draggable","false"),k(),f(!0)},f=function(b){b&&(a.$on("draggable:start",h),a.$on("draggable:move",i),a.$on("draggable:end",j),g())},g=function(){d.off("mousedown touchstart touchmove touchend touchcancel",m),d.on("mousedown touchstart touchmove touchend touchcancel",m)},h=function(c,d){a.$apply(function(){a.clonedData=d.data}),b.css("width",d.element.height()),b.css("height",d.element.height()),l(d.tx,d.ty)},i=function(a,b){l(b.tx,b.ty)},j=function(a,b){k()},k=function(){b.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},l=function(a,c){b.css({left:a,top:c,position:"fixed","z-index":99999,visibility:"visible"})},m=function(a){var b=a.originalEvent;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};e()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(a,b,c){var d=function(){b.attr("draggable","false"),e(!0)},e=function(a){a&&b.on("mousedown touchstart touchmove touchend touchcancel",f)},f=function(a){var b=a.originalEvent;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};d()}}}]),angular.module("ngd3",[]).directive("donut",["$timeout",function(a){var b=$(".donut-container"),c=2*Math.PI,d=b.width(),e=d,f=Math.min(d,e)/2,g=f/3*2,h=Math.min(d,e)/4,i="#f06060",j="#2ecc71",k="#f1c40f";return{restrict:"E",scope:{val:"="},link:function(b,l,m){var n=function(){function a(a,b){a.attrTween("d",function(a){var c=d3.interpolate(a.endAngle,b);return function(b){return a.endAngle=c(b),o(a)}})}var m=i;b.val.percent>=75?m=j:b.val.percent>=50&&b.val.percent<75&&(m=k);var n=d3.select(l[0]).append("svg").attr("width","100%").attr("height",e+"px").attr("viewBox","0 0 "+Math.min(d,e)+" "+Math.min(d,e)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+d/2+","+Math.min(d,e)/2+")"),o=d3.svg.arc().innerRadius(g).outerRadius(f).startAngle(0),p=(n.append("text").text(b.val.value).attr("text-anchor","middle").style("font-size",h+"px").attr("dy",h/3).attr("dx",2),n.append("path").datum({endAngle:c}).style("fill","#eee").attr("d",o),n.append("path").datum({endAngle:0*c}).style("fill",m).attr("d",o));setTimeout(function(){p.transition().duration(750).call(a,b.val.percent*c/100)},500)};a(n,500),b.$watch("exp",function(a,b){})}}}]),angular.module("ngTimer",[]).directive("timer",["$interval","$cookieStore",function(a,b){function c(c,d,e){function f(){i++,d.text(g(parseInt(i/60))+":"+g(i%60)),c.val=i,b.put("timer",i)}function g(a){var b=a+"";return b.length<2?"0"+b:b}var h,i;i=b.get("timer"),null===i&&(i=0),d.on("$destroy",function(){a.cancel(h)}),h=a(function(){f()},1e3)}return{restrict:"EA",scope:{val:"="},link:c}}]),app.controller("HeaderCtrl",["$scope","$q","$location","$window","userFactory","$idle","$keepalive","$modal",function(a,b,c,d,e,f,g,h){function i(){var b=c.path();b.indexOf("quiz")>-1&&(a.isQuiz=!0),j(),f.watch()}function j(){a.warning&&(a.warning.close(),a.warning=null),a.timedout&&(a.timedout.close(),a.timedout=null)}a.isQuiz=!1,i(),a.menu=[{title:"Home",link:"/"}],a.logout=function(){var a=b.defer(),d=a.promise;d.then(function(a){e.logout(),c.path("/")},function(a){}),$("#signoutModal").modal("hide"),$("#signoutModal").on("hidden.bs.modal",function(){a.resolve("success")})},a.logoutall=function(){e.logout(),d.location.href="https://discovery.a2c2.asu.edu"},a.$on("$idleStart",function(){j(),a.warning=h.open({templateUrl:"warning-dialog.html",windowClass:"modal-danger"})}),a.$on("$idleEnd",function(){j()}),a.$on("$idleTimeout",function(){j(),a.timedout=h.open({templateUrl:"timedout-dialog.html",windowClass:"modal-danger"}),a.logoutall()})}]),app.factory("labsFactory",["$http",function(a){var b="https://api.discovery.a2c2.asu.edu";return{getAllLabs:function(){return a({url:b+"/getLabs",method:"GET"}).success(function(a){return a}).error(function(a){})},getLab:function(c){return a({url:b+"/getLab/"+c,method:"GET"}).success(function(a){return a}).error(function(a){})}}}]),app.factory("quizFactory",["$http","localStorageService",function(a,b){var c="https://api.discovery.a2c2.asu.edu";return{submitAnswer:function(d,e){return a({headers:{"Content-Type":"application/json"},url:c+"/submitAnswer/"+e,method:"POST",data:d}).success(function(a){return b.set(a.id,a),a}).error(function(a){})},createAttemptDoc:function(d,e){return a({url:c+"/createAttemptDoc//"+d+"/"+e,method:"GET"}).success(function(a){return b.set(a.id,a),a}).error(function(a){})},getAttemptDoc:function(d){return a({url:c+"/getAttemptDoc/"+d,method:"GET"}).success(function(a){return b.set(a.id,a),a}).error(function(a){})},getLocalAttemptDoc:function(a){return b.get(a)},getReport:function(b){return a({url:c+"/getReport/"+b,method:"GET"}).success(function(a){return a}).error(function(a){})},getReports:function(b){return a({url:c+"/getReports/"+b,method:"GET"}).success(function(a){return a}).error(function(a){})},getQuestion:function(d){return a({url:c+"/getQuestion/"+d,method:"GET"}).success(function(a){return b.set(a.id,a),a}).error(function(a){console.log("Get Question failed..")})},getLocalQuestion:function(a){return b.get(a)}}}]),app.factory("userFactory",["$http","$cookieStore","localStorageService",function(a,b,c){var d="https://api.discovery.a2c2.asu.edu";return{getUser:function(){var e=b.get("userid");return a({url:d+"/getUser/"+e,method:"GET"}).success(function(a){return c.set(e,a),a}).error(function(a){})},getUserbyId:function(b){return a({url:d+"/getUser/"+b,method:"GET"}).success(function(a){return a}).error(function(a){})},getLocalUser:function(){var a=b.get("userid");return c.get(a)},isLoggedIn:function(){var a;return a=b.get("loggedin"),null===a&&(a=!1),a},isAdminLoggedIn:function(){var a;return a=b.get("adminloggedin"),null===a&&(a=!1),a},logout:function(){b.remove("adminloggedin"),b.remove("loggedin"),b.remove("userid"),b.remove("timer"),c.clearAll()}}}]),angular.module("discoveryApp").run(["$templateCache",function(a){a.put("app/admin/partials/admin-addQuestion.html",'<div class=admin-container ng-controller=AdminAddQuestionCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Instructor\'s Page</p><p>Add Question</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="lab-questions-container container"><!-- BreadCrumbs Menu --><ol class=breadcrumb-container><li><a href=/admin>Labs</a></li><li><a href=/admin/lab/{{lab.id}}>Quiz</a></li><li><a href="">Edit</a></li></ol><div class=title-section><p>{{lab.labname}} <span ng-repeat="quiz in lab.quizzes | filter:question.id">({{quiz.quizname}})</span></p></div><!-- This section holds the form that takes the Lab question details as input --><div class=question-section><form name=QuestionForm novalidate><div class=question-block><div class=row><div class=col-md-6><div class=input-block><p class=input-label>Question</p><textarea ng-class="{ \'field-error\' : QuestionForm.question.$error.required && !QuestionForm.question.$pristine }" name=question ng-model=question.question placeholder=Question required></textarea></div><div class=input-block><p class=input-label>Image Path</p><input ng-class="{ \'field-error\' : QuestionForm.imagepath.$error.required && !QuestionForm.imagepath.$pristine }" name=imagepath ng-model=question.imagepath placeholder="Image path" required></div></div><div class=col-md-6><div class=input-block><p class=input-label>Description</p><textarea ng-class="{ \'field-error\' : QuestionForm.description.$error.required && !QuestionForm.description.$pristine }" name=description ng-model=question.description placeholder=Description required></textarea></div><div class=input-block><p class=input-label>Hint</p><input ng-class="{ \'field-error\' : QuestionForm.hint.$error.required && !QuestionForm.hint.$pristine }" name=hint ng-model=question.hint placeholder=Hint required></div></div></div></div><div class=question-block ng-repeat="subquestion in question.subquestions track by $index"><ng-form name=userFieldForm><p class=subquestion-title><span>Sub question {{$index+1}}</span> <strong ng-click=deleteSubQuestion(subquestion)>delete</strong></p><hr><div class=row><div class=col-md-6><div class=input-block><p class=input-label>Sub Question</p><input ng-class="{ \'field-error\' : userFieldForm.subquestion.$error.required && !userFieldForm.subquestion.$pristine }" name=subquestion placeholder="Sub Question" ng-model=subquestion.subquestion required></div><div class=input-block><p class=input-label>Correct Answer</p><input ng-class="{ \'field-error\' : userFieldForm.correctanswer.$error.required && !userFieldForm.correctanswer.$pristine }" name=correctanswer placeholder="Correct Answer" ng-model=subquestion.correctanswer required></div></div><div class=col-md-6><div class=input-block><p class=input-label>Sub Question Type</p><select ng-model=subquestion.optiontype ng-options="optiontype for optiontype in optiontypes" ng-change="addChoice(subquestion, subquestion.optiontype)" ng-class="{ \'field-error\' : userFieldForm.optiontype.$error.required && !userFieldForm.optiontype.$pristine }" name=optiontype required><option value="">Select sub-question type</option></select></div><div class=input-block ng-if="subquestion.optiontype == \'RANGE\' || subquestion.optiontype == \'TEXT\'"><p class=input-label>Answer Range</p><input type=number ng-class="{ \'field-error\' : userFieldForm.answerrange.$error.required && !userFieldForm.answerrange.$pristine || userFieldForm.answerrange.$error.min }" name=answerrange placeholder="Answer Range" ng-model=subquestion.answerrange min=0 required></div></div></div><p class=info-line ng-show="subquestion.optiontype == \'RANGE\'"><i class="fa fa-exclamation"></i> Enter Min, Max and step values for RANGE respectively</p><p class=info-line ng-show="subquestion.optiontype == \'CHOICE\'"><i class="fa fa-exclamation"></i> Enter 4 options for CHOICE respectively</p><p class=info-line ng-show="subquestion.optiontype == \'DRAGDROP\'"><i class="fa fa-exclamation"></i> Enter 4 options for DRAGDROP respectively</p><div class=row><div class=col-md-3 ng-repeat="option in subquestion.options track by $index"><ng-form name=userFieldOptionsForm><div class=input-block><p class=input-label>Option {{$index+1}}</p><input ng-class="{ \'field-error\' : userFieldOptionsForm.option.$error.required && !userFieldOptionsForm.option.$pristine }" name=option placeholder="Enter option" ng-model=subquestion.options[$index] required></div></ng-form></div></div></ng-form></div><div class=button-section><button ng-click=addSubQuestion()>Add Sub-Question</button> <button ng-click=saveQuestion() ng-disabled=QuestionForm.$invalid>Save Question</button></div></form></div></div></div></div></div>'),
a.put("app/admin/partials/admin-create.html",'<div class=admin-container ng-controller=AdminCreateCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Instructor\'s Page</p><p>Create Quizzes for lab</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="lab-create-container container"><ol class=breadcrumb-container><li><a href=/admin>Labs</a></li><li><a href="">Quiz</a></li></ol><form name=saveLabForm novalidate><div class=row><div class=col-md-8><div class=input-section><div class=input-block><p class=input-label>Lab Title</p><input ng-class="{ \'field-error\' : saveLabForm.labname.$error.required && !saveLabForm.labname.$pristine }" name=labname placeholder="Enter Lab Name" class=input-field ng-model=lab.labname required></div><div class=input-block><p class=input-label>Lab Description</p><textarea ng-class="{ \'field-error\' : saveLabForm.labdescription.$error.required && !saveLabForm.labdescription.$pristine }" name=labdescription ng-model=lab.labdescription placeholder="Enter Lab description" class=textarea-field required></textarea></div></div></div><div class=col-md-4><div class=status-section><p ng-if=lab.golive class=green-status-line><i class="fa fa-check"></i> This lab is online and available for students.</p><p ng-if=!lab.golive class=red-status-line><i class="fa fa-exclamation"></i> This lab is offline and not available for students.</p><div class=change-status><p>Change status:</p><!-- Makes lab offline or online --><div class=switch><input id=cmn-toggle-1 class="cmn-toggle cmn-toggle-round" type=checkbox ng-model=lab.golive><label for=cmn-toggle-1></label></div></div><hr><!-- button section for lab--><button data-toggle=modal data-target=#addQuizModal class=addquesbttn>Add Quiz</button> <button class=savelab ng-click=saveLab()>Save Lab</button></div></div></div><p class=section-title>Quizzes Available:</p><div class=row><div class=col-md-8><!-- Displayed if no quizzes are available --><p ng-show=!lab.quizzes.length class=message>No Quizzes added..</p><!-- List of quizzes --><div class=quiz-block ng-repeat="quiz in lab.quizzes | filter:searchQuiz"><p>Quiz {{$index+1}}</p><p>{{quiz.quizname}}</p><p>{{quiz.quizdescription}}</p><div class=button-section><a href="" ng-click=editQuiz(quiz)>Edit Quiz</a> <a href=admin/question/{{quiz.id}}>Add/Edit Question</a> <a href="" ng-click="deleteQuizConfirm(lab.id, quiz.id)">Delete Quiz</a></div></div></div><div class=col-md-4><div class=sidebar-container><p><span>{{ (lab.quizzes | filter:searchQuiz).length }}</span> Quizzes</p><input class=input-field ng-model=searchQuiz placeholder="Search Quiz"></div></div></div></form><!-- Add Quiz Modal --><div class="modal fade" id=addQuizModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Create Quiz</h4></div><div class=modal-body><form name=addQuizForm novalidate><div class=input-block><p class=input-label>Quiz Name</p><input ng-class="{ \'field-error\' : addQuizForm.quizname.$error.required && !addQuizForm.quizname.$pristine }" name=quizname class=input-field placeholder="Enter Quiz Name" ng-model=addquiz.quizname required></div><div class=input-block><p class=input-label>Quiz Description</p><textarea ng-class="{ \'field-error\' : addQuizForm.quizdescription.$error.required && !addQuizForm.quizdescription.$pristine }" name=quizdescription ng-model=addquiz.quizdescription placeholder="Enter Quiz description" required></textarea></div></form></div><div class=modal-footer><button type=button data-dismiss=modal>Close</button> <button type=button ng-disabled=addQuizForm.$invalid ng-click=addQuiz()>Submit</button></div></div></div></div><!-- Edit Quiz Modal --><div class="modal fade" id=editQuizModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><form name=editQuizForm novalidate><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Edit Quiz</h4></div><div class=modal-body><div class=input-block><p class=input-label>Quiz Name</p><input ng-class="{ \'field-error\' : editQuizForm.quizname.$error.required && !editQuizForm.quizname.$pristine }" name=editquizname class=input-field placeholder="Enter Quiz Name" ng-model=equiz.quizname required></div><div class=input-block><p class=input-label>Quiz Name</p><textarea ng-class="{ \'field-error\' : editQuizForm.quizdescription.$error.required && !editQuizForm.quizdescription.$pristine }" name=editquizdescription ng-model=equiz.quizdescription placeholder="Enter Quiz description" required></textarea></div></div><div class=modal-footer><button type=button ng-click=getLab()>Close</button> <button type=button ng-disabled=editQuizForm.$invalid ng-click=updateQuiz()>Submit</button></div></form></div></div></div><!-- Delete Quiz Modal --><div class="modal fade" id=deleteQuizModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Edit Quiz</h4></div><div class=modal-body><p>Please confirm that you want to delete this quiz?</p></div><div class=modal-footer><button type=button data-dismiss=modal>Close</button> <button type=button ng-click=deleteQuiz()>Confirm</button></div></div></div></div></div></div></div></div>'),a.put("app/admin/partials/admin-header.html",'<header ng-controller=AdminHeaderCtrl><div class="header-block clearfix container"><div class=logo-block><div class=logo-icon><img src="assets/images/svg/7258eb95.logo.svg"></div><div class=logo-text>Discovery</div></div><div class="menu-block hidden-xs"><ul><li><a href=admin>home</a></li><li><a href=admin/students>students</a></li><li><a href=admin/settings>settings</a></li><li class=signout><a href="" ng-click=logout()>Sign Out</a></li></ul></div><div class="mobile-menu visible-xs"><i class="fa fa-bars"></i></div></div></header>'),a.put("app/admin/partials/admin-login.html",'<div class=admin-container ng-controller=AdminLoginCtrl><div class=admin-login-container><div class=login-block><p class=form-title>Admin Login</p><form name=adminForm ng-submit=submitAdminForm(adminForm.$valid) novalidate><div class=field-block><input type=email ng-class="{ \'field-error\' : adminForm.email.$error.required && !adminForm.email.$pristine || adminForm.email.$error.email && !adminForm.email.$pristine}" name=email ng-model=admin.email placeholder="Enter Email" required></div><div class=field-block><input ng-class="{ \'field-error\' : adminForm.name.$error.required && !adminForm.name.$pristine }" name=name ng-model=admin.name placeholder="Enter Name" required></div><div ng-show=serviceerror class=service-error>invalid credentials..</div><button type=submit ng-disabled=adminForm.$invalid ng-hide=loading>Submit</button> <button ng-show=loading class=loading-bttn><i class="fa fa-spinner fa-spin"></i> Logging in..</button></form></div><br><a href="/#/"><i class="fa fa-caret-left"></i> Back to Discovery Home page</a></div></div>'),a.put("app/admin/partials/admin-management.html",'<!-- This view consisits of the user management component --><div class=admin-container ng-controller=AdminSettingsCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Settings Page</p><p>User Management</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="user-container container"><div class=row><div class=col-md-8><!-- List of admins --><div class=instructors-table><table class=table><thead><tr><td>Name</td><td>Email</td><td>Action</td></tr></thead><tbody><tr ng-repeat="instructor in instructors"><td>{{instructor.name}}</td><td>{{instructor.email}}</td><td><button ng-click=deleteInstructor(instructor.id) ng-hide=deleteloading>Delete</button> <button ng-show=deleteloading class=loading-bttn><i class="fa fa-spinner fa-spin"></i></button></td></tr></tbody></table><div ng-if="instructors.length == 0"><p class=no-instructor>No Instructor added..</p></div></div></div><div class=col-md-4><div class=add-instructor-container><p class=form-title>Add Instructor</p><!-- Add instructor form --><form name=addInstructorForm ng-submit=submitInstructorForm(addInstructorForm.$valid) novalidate><div class=field-block><input type=email ng-class="{ \'field-error\' : addInstructorForm.email.$error.required && !addInstructorForm.email.$pristine || addInstructorForm.email.$error.email && !addInstructorForm.email.$pristine}" name=email ng-model=instructor.email placeholder="Enter Email" required></div><div class=field-block><input ng-class="{ \'field-error\' : addInstructorForm.name.$error.required && !addInstructorForm.name.$pristine }" name=name ng-model=instructor.name placeholder="Enter Name" required></div><div ng-show=serviceerror class=service-error>Add Instructor failed! Please Try again..</div><button type=submit ng-disabled=addInstructorForm.$invalid ng-hide=loading>Submit</button> <button ng-show=loading class=loading-bttn><i class="fa fa-spinner fa-spin"></i> Adding..</button></form></div></div></div></div></div></div></div>'),a.put("app/admin/partials/admin-student-profile.html",'<div class=profile-container ng-controller=ProfileCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Students Page</p><p>Analyze Student data</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="profile-data-container container"><!--<p ng-hide="user.type" class="guestuser">Profile not available for Guest User..</p>--><!-- BreadCrumbs Menu --><ol class=breadcrumb-container><li><a href=/#/admin/students>Students</a></li><li><a href="">Profile</a></li></ol><hr><p ng-if="reports.length == 0" class=nolab>No Lab attempted..</p><div class=row><div class="row user-table"><div class="col-md-1 col-sm-3 col-xs-3"><div class=user-table-title><p>Name:</p><p>Email:</p></div></div><div class="col-md-11 col-sm-9 col-xs-9"><div class=user-table-answer><p>{{user.name}}</p><p>{{user.email}}</p></div></div></div><hr><div class=lab-block ng-repeat="report in reports"><p class=title ng-repeat="lab in labs | filter:report.labid">{{lab.labname}}</p><hr><div ng-repeat="quizattempt in report.quizattempts"><div class=attempt-block ng-repeat="attempt in quizattempt" ng-click=showReport(attempt.id)><div class="col-md-8 col-sm-8 col-xs-8"><p>Attempt {{$index+1}}</p><!--<p>Quiz</p>--><p ng-repeat="quiz in (labs | filter:report.labid)[0].quizzes | filter:{id:attempt.quizId}">{{quiz.quizname}}</p></div><div class="col-md-4 col-sm-4 col-xs-4 score-block"><!--<p>view</p>--><p>{{attempt.score}}</p></div></div></div></div></div></div></div></div></div>'),a.put("app/admin/partials/admin-student-report.html",'<div class=report-container ng-controller=ReportCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Students Page</p><p>Analyze Student data</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="report-container container"><!-- BreadCrumbs Menu --><ol class=breadcrumb-container><li><a href=/#/admin/students>Students</a></li><li><a href=/#/admin/students/profile/{{user.id}}>Profile</a></li><li><a href="">report</a></li></ol><hr><div class=row><div class=col-md-6><table class=report-table><tbody><tr><td><p>Name:</p></td><td><p>{{user.name}}</p></td></tr><tr><td><p>Email:</p></td><td><p>{{user.email}}</p></td></tr><tr><td><p>Lab:</p></td><td><p>{{lab.labname}}</p></td></tr><tr><td><p>Quiz:</p></td><td><p>{{(lab.quizzes | filter:{id:report.quizid})[0].quizname }}</p></td></tr></tbody></table></div><div class=col-md-6><table class=report-table><tbody><tr><td><p>Score:</p></td><td><p>{{report.score | number : 2}}</p></td></tr><tr><td><p>Time:</p></td><td><p>{{report.clock/60 | number : 0}} Minutes {{report.clock % 60}} Seconds</p></td></tr><tr><td><p>Date:</p></td><td><p>{{report.date | date}}</p></td></tr></tbody></table></div></div><br><hr><div class="row stats-container"><div class="col-md-4 col-sm-4"><p>ATTEMPTED</p><p>(out of {{report.subanswers.length}})</p><div class=donut-container><donut val=attempted></donut></div></div><div class="col-md-4 col-sm-4"><p>SCORE</p><p>(out of {{report.subanswers.length*10}})</p><div class=donut-container><donut val=score></donut></div></div><div class="col-md-4 col-sm-4"><p>AVG TIME</p><p>(in Minutes)</p><div class=donut-container><donut val=time></donut></div></div></div><hr><div class=button-section><a href=/#/admin/students/profile/{{user.id}}>Go back to Student Profile</a></div></div></div></div></div>'),a.put("app/admin/partials/admin-students.html",'<div class=admin-container ng-controller=AdminStudentsCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Students Page</p><p>Analyze Student data</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class=col-md-3 id=color1></div><div class=col-md-3 id=color2></div><div class=col-md-3 id=color3></div><div class=col-md-3 id=color4></div></div></div><div class="students-container container"><div class=row><div class=col-md-8><div class=student-details-block><!-- List of students --><div class=students-table><table class=table><thead><tr><td>#</td><td>Name</td><td>Email</td><td>Type</td><td>Action</td></tr></thead><tbody><tr ng-repeat="student in students | filter:searchStudent | filter:{type: typevalue}"><td>{{$index+1}}</td><td>{{student.name}}</td><td>{{student.email}}</td><td><span ng-show=student.type>ASU</span> <span ng-hide=student.type>Guest</span></td><td><a href=/#/admin/students/profile/{{student.id}} ng-click="">Show Details</a></td></tr></tbody></table><!-- If no student --><div ng-if="students.length == 0"><p class=no-student>No student data..</p></div></div></div></div><div class=col-md-4><div class=search-container><!-- search student by typing the name --><div class=search-block><p><span>{{ (students | filter:searchStudent | filter:{type: typevalue}).length }}</span> students</p></div><div class=search-block><input class=input-field ng-model=searchStudent placeholder="Search Student"></div><!-- On clicking the appropriate button will change the type of students displayed on the left side of the page --><div class=search-block><div class=type-choice><input type=radio name=asu id=asu ng-model=typevalue value="true"><label for=asu><span>ASU</span></label><input type=radio name=asu id=guest ng-model=typevalue value="false"><label for=guest><span>Guest</span></label><input type=radio name=all id=all ng-model=typevalue value="\'\'"><label for=all><span>All</span></label></div></div></div></div></div></div></div></div></div>'),a.put("app/admin/partials/admin.html",'<div class=admin-container ng-controller=AdminCtrl><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'app/admin/partials/admin-header.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Instructor\'s Page</p><p>Create or edit lab</p><i class="fa fa-cogs"></i> <button data-toggle=modal data-target=#createLabModal>Create Lab</button></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div class="labs-container container"><div class=row><div class=col-md-8><!-- This message is shown when there are no labs to show--><p ng-show=!labs.length class=nolabsmsg>No Labs added..</p><!-- This displays the list of labs available --><ul><li ng-repeat="lab in labs | filter:searchLab"><div class=lab-block><div class=content-section><p>{{lab.labname}}<!-- If online --><span ng-if=lab.golive class=green-status-line><i class="fa fa-check"></i> Online</span><!-- If offline --> <span ng-if=!lab.golive class=red-status-line><i class="fa fa-exclamation"></i> Offline</span></p><p>{{lab.labdescription}}</p><!-- Button Section --><button ng-click=editlab(lab.id)>Edit Lab</button> <button ng-click=deletelab(lab)>Delete Lab</button></div></div></li></ul></div><!-- Search block --><div class=col-md-4><div class=sidebar-container><p><span>{{ (labs | filter:searchLab).length }}</span> labs</p><input class=input-field ng-model=searchLab placeholder="Search Lab"></div></div></div></div></div></div><!-- Create Lab Modal --><div class="modal fade" id=createLabModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title>Create Lab</h4></div><div class=modal-body><form name=createLabForm novalidate><div class=input-block><p class=input-label>Lab Name</p><input ng-class="{ \'field-error\' : createLabForm.labname.$error.required && !createLabForm.labname.$pristine }" name=labname class=input-field placeholder="Enter Lab Name" ng-model=lab.labname required></div><div class=input-block><p class=input-label>Lab Description</p><textarea ng-class="{ \'field-error\' : createLabForm.labdescription.$error.required && !createLabForm.labdescription.$pristine }" name=labdescription ng-model=lab.labdescription placeholder="Enter Lab description" required></textarea></div></form></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-primary" ng-disabled=createLabForm.$invalid ng-click=createLab()>Submit</button></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal --><!-- Confirm Delete Modal --><div class="modal fade" id=deleteModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Confirm Delete Lab</h4></div><div class=modal-body>Are you sure you want to delete this Lab?</div><div class=modal-footer><button type=button class="btn btn-default" ng-click=donotdeletelab()>No</button> <button type=button class="btn btn-danger" ng-click=deletelabconfirm()>Yes</button></div></div></div></div></div>'),a.put("app/consent/consent.html",'<div class=consent-container><div class="consent-block container"><div class=row><div class=col-md-7><p>{{lab.labname}}</p><p>{{lab.labdescription}}</p></div><div class=col-md-5><p>Terms and conditions:</p><p><span>*</span> Data will be collected from this lab and used to assess student learning and improve future iterations of the course. Data may also be used in publications.</p><br><button ng-click=startLab()>I Accept the terms and conditions</button></div></div></div></div>'),a.put("app/home/home.html",'<div class=home-container><!--  <div class="down-button"  id="down-button">\r\n    <div class="outer-layer">\r\n      <i class="fa fa-angle-down"></i>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="up-button" id="up-button">\r\n    <div class="outer-layer">\r\n      <i class="fa fa-angle-up"></i>\r\n    </div>\r\n  </div>--><!-- Page Loading while ASU user is logging in --><div ng-show=pageloading class=page-loading-spinner><p><i class="fa-li fa fa-spinner fa-spin"></i></p></div><div class="content-block container-fluid" id=content-block><div id=section1 class=section1><header><div class="header-block clearfix container"><div class=logo-block><div class=logo-icon><!--<i class="fa fa-flask"></i>\r\n              <img src="assets/images/svg/7258eb95.logo.svg" style="display: none"/> - Dont remove - It\'s a hack - acting weird--><img src="assets/images/svg/7258eb95.logo.svg"></div><div class=logo-text>Discovery</div></div><div class="menu-block hidden-xs"><ul><li><a href="" onclick=home()>home</a></li><li><a href="" onclick=interactive()>interactive</a></li><li><a href="" onclick=practice()>practice</a></li><li><a href="" onclick=home()>sign in</a></li></ul></div></div></header><div class="main-block container"><div class=row><div class="col-md-7 hidden-xs hidden-sm"><div class=title-section></div></div><!-- Login Block --><div class=col-md-5><div class=login-section><div class=asu-block><div class=buttons-toggle-section><button ng-click="toggleclass(\'asu\')" ng-class="{\'login-active\': showasu}">ASU</button> <button ng-click="toggleclass(\'guest\')" ng-class="{\'login-active\': !showasu}">GUEST</button></div><div ng-show=showasu class=login-form><div class=cas-login><p>ASU CAS Authentication</p><p>Login with ASU credentials to access this application</p><button ng-click=casAuth()>ASU Log In</button></div></div><div ng-hide=showasu class=login-form><form name=guestForm ng-submit=submitGuestForm(guestForm.$valid) novalidate><div class=field-block><input type=email ng-class="{ \'field-error\' : guestForm.email.$error.required && !guestForm.email.$pristine || guestForm.email.$error.email && !guestForm.email.$pristine}" name=email ng-model=guestuser.email placeholder="Enter your Email" required></div><div class=field-block><input ng-class="{ \'field-error\' : guestForm.name.$error.required && !guestForm.name.$pristine }" name=name ng-model=guestuser.name placeholder="Enter your Name" required></div><div ng-show=serviceerror class=service-error>Login Failed! Please Try again..</div><button type=submit ng-disabled=guestForm.$invalid ng-hide=loading>Log In</button> <button ng-show=loading class=loading-bttn><i class="fa fa-spinner fa-spin"></i> Logging in..</button></form></div></div></div></div></div></div></div><!-- Colorful lines --><div class="container-fluid colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div id=section2 class=section2><div class="main-block container"><div class=row><div class="col-md-6 col-sm-7"><div class=text-block><p>Interactive Lab</p><p>This lab, consisting of 13 quizzes, focuses on teaching students how to think about orders of magnitude and to make estimations. Students will be awarded points, based on how close their estimates are to the correct answer.</p><button ng-click=gotoTop()>login to take a quiz</button></div></div><div class="col-md-6 col-sm-5 hidden-xs"><div class=image><img src="assets/images/svg/b1f10352.interactive.svg"></div></div></div></div></div><div id=section3 class=section3><div class="main-block container"><div class=row><div class="col-md-6 col-sm-5 hidden-xs"><div class=image><img src="assets/images/svg/c190d0a5.practice.svg"></div></div><div class="col-md-6 col-sm-7"><div class=text-block><p>Practice makes perfect</p><p>Practice what you\'ve learned through the interactive quizzes. You can attempt a quiz as many times as you want.</p><button ng-click=gotoTop()>login to practice</button></div></div></div></div></div><!-- Footer --><footer><div class="main-block container"><div class=row><div class=col-md-12><div class=image><img src="assets/images/svg/7258eb95.logo.svg"></div><p> 2014 Discovery, Inc.</p><ul><li><a href="">terms</a></li><li><a href="">privacy</a></li><li><a href="">contact</a></li></ul></div></div></div></footer></div><!-- Cookies not enabled Modal --><div class="modal fade" id=noCookiesModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Cookies not enabled</h4></div><div class=modal-body>This App only works if cookies are enabled. Please enable cookies in your cookies!</div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div></div><script>var section1 = $(\'#section1\');\r\n  var section2 = $(\'#section2\');\r\n  var section3 = $(\'#section3\');\r\n  var contentblock = $(\'.content-block\');\r\n\r\n  /*var upbutton = $(\'#up-button\');\r\n  var downbutton = $(\'#down-button\');*/\r\n\r\n  var scrollcount = 0;\r\n\r\n  function interactive(){\r\n    $(\'html, body\').animate({\r\n      scrollTop: section2.offset().top\r\n    }, 500);\r\n   /* upbutton.hide();\r\n    downbutton.show();*/\r\n  }\r\n\r\n  function practice(){\r\n    $(\'html, body\').animate({\r\n      scrollTop: section3.offset().top\r\n    }, 500);\r\n   /* upbutton.show();\r\n    downbutton.hide();*/\r\n  }\r\n\r\n  function home(){\r\n    $(\'html, body\').animate({\r\n      scrollTop: 0\r\n    }, 500);\r\n   /* upbutton.hide();\r\n    downbutton.show();*/\r\n  }\r\n\r\n  /*Code for page navigation using arrow*//*\r\n   var activeSec = section1;\r\n   $("#down-button").click(function(){\r\n   if(activeSec == section1){\r\n   $(\'html, body\').animate({\r\n   scrollTop: section2.offset().top\r\n   }, 500);\r\n   activeSec = section2;\r\n   }\r\n   else if(activeSec == section2){\r\n   $(\'html, body\').animate({\r\n   scrollTop: section3.offset().top\r\n   }, 500);\r\n   activeSec = section3;\r\n   }\r\n   else if(activeSec == section3){\r\n   $(\'html, body\').animate({\r\n   scrollTop: 0\r\n   }, 500);\r\n   activeSec = section1;\r\n   }\r\n   });\r\n\r\n   *//*Code for detecting end of page scroll*//*\r\n   $(window).scroll(function() {\r\n   if($(window).scrollTop() + $(window).height() == $(document).height()) {\r\n   upbutton.show();\r\n   downbutton.hide();\r\n   }\r\n   else{\r\n   upbutton.hide();\r\n   downbutton.show();\r\n   //console.log( "winST="+$(window).scrollTop() + " winH=" +  $(window).height() + " docH="+ $(document).height());\r\n   }\r\n   });*/</script>'),a.put("app/lab/lab.html",'<div class=lab-container><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'components/navbar/navbar.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Lab</p><p>{{lab.labname}}</p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div class="lab-data-container container"><!-- Breadcrumbs Menu --><ol class=breadcrumb-container><li><a href=/labs>Labs</a></li><li><a href="">Quiz</a></li></ol><div class=row><div class=col-md-8><!-- This message is shown when there are no quizzes to show--><p ng-if="lab.quizzes.length == 0" class=noquizmsg>Quizzes not available..</p><!-- If there are quizzes to show for this lab --><div class=quiz-block ng-repeat="quiz in lab.quizzes | filter:searchQuiz"><p>Quiz {{$index+1}}</p><p>{{quiz.quizname}}</p><p>{{quiz.quizdescription}}</p><div class=button-section><a href=/consent/{{lab.id}}/{{quiz.id}}>Start Quiz</a></div></div></div><!-- Search bar container at the right of the page. Used the search the quizzes on the left --><div class=col-md-4><div class=sidebar-container><p><span>{{ (lab.quizzes | filter:searchQuiz).length }}</span> labs</p><input class=input-field ng-model=searchQuiz placeholder="Search Quiz"></div></div></div></div></div></div><!-- Footer --><footer><div class=container><div class=footer><div class="col-xs-6 col-sm-6 col-md-6"><p> 2014 Discovery, Inc.</p></div><div class="col-xs-6 col-sm-6 col-md-6"><a href="">Contact</a> <a href="">Privacy</a> <a href="">Terms</a></div></div></div></footer></div>'),a.put("app/labs/labs.html",'<div class=labs-container><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'components/navbar/navbar.html\'"></div><div class="main-block container"><div class=row><div class=col-md-12><div class=title-section></div></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div class=container><div class=row><div class=col-md-8><!-- This message is shown when there are no labs to show--><p ng-show="!(labs | filter:{golive:true}).length" class=nolabsmsg>Labs not available..</p><!-- If there are quizzes to show for this lab --><div class=lab-list><ul><li ng-repeat="lab in labs | filter:searchLab | filter:{golive:true}"><div class=lab-block><div class=content-section><p>{{lab.labname}} <span class=quiz-count><strong>{{lab.quizzes.length}}</strong> Quizzes</span></p><p>{{lab.labdescription}}</p><button ng-click=startLab(lab.id)>Open Lab</button></div></div></li></ul></div></div><!-- Search bar container at the right of the page. Used the search the labs on the left --><div class=col-md-4><div class=sidebar-container><div class=sidebar-block><p><span>{{ (labs | filter:searchLab | filter:{golive:true}).length }}</span> labs</p><input class=input-field ng-model=searchLab placeholder="Search Lab"></div></div></div></div></div></div><!-- Footer --><footer><div class=container><div class=footer><div class="col-xs-6 col-sm-6 col-md-6"><p> 2014 Discovery, Inc.</p></div><div class="col-xs-6 col-sm-6 col-md-6"><a href="">Contact</a> <a href="">Privacy</a> <a href="">Terms</a></div></div></div></footer></div>'),
a.put("app/login/login.html",'<div class=login-container ng-controller=LoginCtrl><div class=login-section><!-- ASU Login --><div class=asu-block><div class=buttons-toggle-section><button ng-click="toggleclass(\'asu\')" ng-class="{\'login-active\': showasu}">ASU</button> <button ng-click="toggleclass(\'guest\')" ng-class="{\'login-active\': !showasu}">GUEST</button></div><div ng-show=showasu class=login-form><div class=cas-login><p>ASU CAS Authentication</p><p>Login with ASU credentials to access this application</p><button ng-click=casAuth()>ASU Log In</button></div></div><!-- Guest user login --><div ng-hide=showasu class=login-form><form name=guestForm ng-submit=submitGuestForm(guestForm.$valid) novalidate><div class=field-block><input type=email ng-class="{ \'field-error\' : guestForm.email.$error.required && !guestForm.email.$pristine || guestForm.email.$error.email && !guestForm.email.$pristine}" name=email ng-model=guestuser.email placeholder="Enter your Email" required></div><div class=field-block><input ng-class="{ \'field-error\' : guestForm.name.$error.required && !guestForm.name.$pristine }" name=name ng-model=guestuser.name placeholder="Enter your Name" required></div><div ng-show=serviceerror class=service-error>Login Failed! Please Try again..</div><button type=submit ng-disabled=guestForm.$invalid ng-hide=loading>Log In</button> <button ng-show=loading class=loading-bttn><i class="fa fa-spinner fa-spin"></i> Logging in..</button></form></div></div><br><a href="/#/"><i class="fa fa-caret-left"></i> Back to Discovery Home page</a></div></div>'),a.put("app/profile/profile.html",'<div class=profile-container><!-- This is the background blue sheet behind the container --><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><!-- Includes header --><div ng-include="\'components/navbar/navbar.html\'"></div><!-- Top block of the page --><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Profile</p><p>{{user.name}} <span>({{user.email}})</span></p><i class="fa fa-cogs"></i></div></div></div></div><!-- Colorful lines --><div class="container colorful-line"><div class=row><div class="col-md-3 col-sm-3 col-xs-3" id=color1></div><div class="col-md-3 col-sm-3 col-xs-3" id=color2></div><div class="col-md-3 col-sm-3 col-xs-3" id=color3></div><div class="col-md-3 col-sm-3 col-xs-3" id=color4></div></div></div><div class="profile-data-container container"><!-- This message is shown when there are no labs attempted to show--><p ng-if="reports.length == 0" class=nolab>You haven\'t attempted any Lab..</p><!-- If there are any labs attempted --><div class=container-fluid><div class=row><div class=lab-block ng-repeat="report in reports"><p class=title ng-repeat="lab in labs | filter:report.labid">{{lab.labname}}</p><hr><div ng-repeat="quizattempt in report.quizattempts"><div class=attempt-block ng-repeat="attempt in quizattempt" ng-click=showReport(attempt.id)><div class="col-md-8 col-sm-8 col-xs-8"><p>Attempt {{$index+1}}</p><!--<p>Quiz</p>--><p ng-repeat="quiz in (labs | filter:report.labid)[0].quizzes | filter:{id:attempt.quizId}">{{quiz.quizname}}</p></div><div class="col-md-4 col-sm-4 col-xs-4 score-block"><!--<p>view</p>--><p>{{attempt.score}}</p></div></div></div></div></div></div></div></div></div></div>'),a.put("app/quiz/quiz.html",'<div class=quiz-container><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><div ng-include="\'components/navbar/navbar.html\'"></div><div class="main-block container"><div class=row><div class=col-md-12><div class=question-progress-container><div class=progress-block><div class=row><div class=col-md-12><span><strong>Progress</strong></span> <span><strong>{{question.subquestions.length}}</strong></span><!-- <progress max=\'{{lab.labquestions.length}}\' value=\'{{currentquestion}}\'></progress> --><div class=progress><div ng-if="attempt.submitcount == 0" class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=0></div><div ng-if="attempt.submitcount != 0" class="progress-bar progress-bar-color progress-bar-striped active" role=progressbar aria-valuenow={{attempt.submitcount}} aria-valuemin=0 aria-valuemax={{question.subquestions.length}} style="width: {{attempt.submitcount/question.subquestions.length * 100}}%"></div></div></div></div></div><div class="error-block container" ng-if=errors><p>Please answer all the questions and submit!</p></div><div class=question-block><div class=row><div class=col-md-12><p><strong>Question</strong></p><p ng-bind-html=question.question>{{question.question}}</p><p ng-bind-html=question.description>{{question.description}}</p><br><button class=hint-button data-toggle=modal data-target=#hintModal><i class="fa fa-bell"></i> Hint</button><!-- Modal --><div class="modal fade" id=hintModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel><i class="fa fa-bell-o"></i> Hint</h4></div><div class=modal-body><span ng-bind-html=question.hint>{{question.hint}}</span></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div></div><!--\r\n                  <div class="col-md-4">\r\n                    <div class="quiz-image hidden-xs">\r\n                      <img src="{{lab.labquestions[currentquestion].imagepath}}" />\r\n                    </div>\r\n                  </div>\r\n                  --></div></div></div></div></div></div><div class="container colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div class="main-content container"><div class=row><div class="col-md-12 visible-xs visible-sm"><div class=side-block-container><div class=side-block><div class=icon-block-mobile-container><div class=icon-block-mobile><div class=icon-block><i class="fa fa-clock-o"></i><p>clock</p></div></div><div class=icon-block-mobile><div class=icon-block><i class="fa fa-pencil"></i><p>score</p></div></div></div><div class=icon-block-mobile-container><div class=icon-block-mobile><div class=counter-block><p><timer val=attempt.clock></timer></p></div></div><div class=icon-block-mobile><div class=counter-block><p>{{attempt.score | number : 2}}</p></div></div></div></div><br></div></div><div class=col-md-8><div ng-if=showall><div class=subquestions-list-container><div class=subquestion-list-block ng-repeat="subquestion in question.subquestions" ng-click=gotoQuestion($index+1)><p><span>{{$index+1}}</span> <strong ng-bind-html=subquestion.subquestion>{{subquestion.subquestion}}</strong></p></div><p class=note>Note: Click on a question to answer it. Once you submit an answer, you cannot change it. However, ifyou save your answer, you can change it. You have to submit all the answers to complete the quiz.</p></div></div><div ng-if=!showall><div class=subquestion-container><div ng-if=!attempt.subanswers[currentindex].submitted><div class=sub-question-block><div class=question-header><p>Question {{currentindex+1}}</p></div><p ng-bind-html=currentquestion.subquestion class=question>{{currentquestion.subquestion}}</p><p ng-if="currentquestion.optiontype == \'RANGE\'" class=description>Drag the button to the estimated value of the given range.</p><p ng-if="currentquestion.optiontype == \'CHOICE\'" class=description>Select the estimated value from the choices given below.</p><p ng-if="currentquestion.optiontype == \'DRAGDROP\'" class=description>Drag your estimated value into the box below.</p><p ng-if="currentquestion.optiontype == \'TEXT\'" class=description>Enter the estimated value in the inputbox given below.</p></div><div ng-if="currentquestion.optiontype == \'RANGE\'" class=answer-block><p>Your estimated value is <span>{{attempt.subanswers[currentindex].subanswer}}</span></p><br><input type=range min={{currentquestion.options[0]}} max={{currentquestion.options[1]}} ng-model=attempt.subanswers[currentindex].subanswer step="{{currentquestion.options[2]}}"></div><div ng-if="currentquestion.optiontype == \'CHOICE\'" class=answer-block><div ng-repeat="option in currentquestion.options" class=choice-field><input type=radio name=choice-{{$index}} id=choiceoption-{{$index}} value={{option}} ng-model="attempt.subanswers[currentindex].subanswer"><label for=choiceoption-{{$index}}><strong>{{$index+1}}</strong> <span ng-bind-html=option>{{option}}</span></label></div></div><div ng-if="currentquestion.optiontype == \'DRAGDROP\'" class=answer-block><p>Your answer is <span ng-bind-html=attempt.subanswers[currentindex].subanswer>{{attempt.subanswers[currentindex].subanswer}}</span></p><br><div class=dragzone><div ng-repeat="option in currentquestion.options" ng-drag=true ng-drag-data=option class=option-item><span ng-bind-html=option>{{option}}</span></div></div><br><div ng-drop=true ng-drop-success="onDropComplete($data, $event, currentindex)" class=dropzone><p ng-if="attempt.subanswers[currentindex].subanswer == \'\'" ng-class="{ \'nodrop\' : attempt.subanswers[currentindex].subanswer == \'\' }">Drag Here</p><p ng-if="attempt.subanswers[currentindex].subanswer != \'\'" ng-bind-html=attempt.subanswers[currentindex].subanswer>{{attempt.subanswers[currentindex].subanswer}}</p></div></div><div ng-if="currentquestion.optiontype == \'TEXT\'" class=answer-block><p>Your estimated value is <span>{{attempt.subanswers[currentindex].subanswer}}</span></p><br><input class=text-field ng-model=attempt.subanswers[currentindex].subanswer placeholder="Enter your answer here"></div><div class="button-section hidden-xs"><button ng-if="(currentindex-1) >= 0" class=prev ng-click=prev(currentindex)>Prev</button> <button ng-if="(currentindex+1) < attempt.subanswers.length" class=next ng-click=next(currentindex+2)>Next</button><!--<button class="submit" data-toggle="modal" data-target="#submitModal">Submit</button>--> <button class=submit ng-click=submitAnswer()>Submit</button> <button class=save ng-click=saveAttempt()>Save</button></div><div class="button-section visible-xs"><button ng-if="(currentindex-1) >= 0" class=prev ng-click=prev(currentindex)><i class="fa fa-caret-left"></i></button> <button ng-if="(currentindex+1) < attempt.subanswers.length" class=next ng-click=next(currentindex+2)><i class="fa fa-caret-right"></i></button><!--<button class="submit" data-toggle="modal" data-target="#submitModal">Submit</button>--> <button class=submit ng-click=submitAnswer()>Submit</button> <button class=save ng-click=saveAttempt()><i class="fa fa-floppy-o"></i></button></div></div><div ng-if=attempt.subanswers[currentindex].submitted><div class=sub-question-block><div class=question-header><p>Question {{currentindex+1}}</p><span class=correct ng-if=attempt.subanswers[currentindex].correct>correct</span> <span class=incorrect ng-if=!attempt.subanswers[currentindex].correct>incorrect</span></div><p ng-bind-html=currentquestion.subquestion class=question>{{currentquestion.subquestion}}</p></div><div class=answer-block><p>Your estimated value is <span ng-bind-html=attempt.subanswers[currentindex].subanswer>{{attempt.subanswers[currentindex].subanswer}}</span></p></div><div class=button-section><button ng-if="(currentindex-1) >= 0" class=prev ng-click=prev(currentindex)>Prev</button> <button ng-if="(currentindex+1) < attempt.subanswers.length" class=next ng-click=next(currentindex+2)>Next</button></div></div></div></div></div><div class="col-md-12 visible-xs visible-sm"><div class=side-block-container><div class=question-numbers-container><p>Questions</p><span ng-repeat="subanswer in attempt.subanswers" ng-click=gotoQuestion($index+1)><strong class=blue ng-if="subanswer.saved && !subanswer.submitted">{{subanswer.id}}</strong> <strong class=green ng-if=subanswer.submitted>{{subanswer.id}}</strong> <strong class=red ng-if="!subanswer.saved && !subanswer.submitted">{{subanswer.id}}</strong></span> <span ng-click="gotoQuestion(\'all\')">Show All</span></div><br></div></div><div class="col-md-4 hidden-xs hidden-sm"><div class=side-block-container><div class=side-block><div class=row><div class=col-md-4><div class=icon-block><i class="fa fa-clock-o"></i><p>clock</p></div></div><div class=col-md-8><div class=counter-block><p><timer val=attempt.clock></timer></p></div></div></div></div><br><div class=side-block><div class=row><div class=col-md-4><div class=icon-block><i class="fa fa-pencil"></i><p>score</p></div></div><div class=col-md-8><div class=counter-block><p>{{attempt.score | number : 2}}</p></div></div></div></div><br><div class=question-numbers-container><p>Questions</p><span ng-repeat="subanswer in attempt.subanswers" ng-click=gotoQuestion($index+1)><strong class=blue ng-if="subanswer.saved && !subanswer.submitted">{{subanswer.id}}</strong> <strong class=green ng-if=subanswer.submitted>{{subanswer.id}}</strong> <strong class=red ng-if="!subanswer.saved && !subanswer.submitted">{{subanswer.id}}</strong></span> <span ng-click="gotoQuestion(\'all\')">Show All</span></div></div></div></div><!-- Submit Modal --><!-- Removed since it was not needed for this release --><!--<div class="modal fade" id="submitModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n          <div class="modal-dialog">\r\n            <div class="modal-content">\r\n              <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\r\n                </button>\r\n                <h4 class="modal-title" id="myModalLabel">Confirm Submission</h4>\r\n              </div>\r\n              <div class="modal-body">\r\n                Are you sure you want to submit this answer?\r\n              </div>\r\n              <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n                <button type="button" class="btn btn-info" ng-click="submitAnswer()">Submit Answer</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>--><!-- Help Modal --><div class="modal fade" id=helpModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Help</h4></div><div class=modal-body><p>Click on Submit button to submit an answer.</p><p>The bar besides submit button, shows the progress.</p><p>The blue section consists of the question and corresponding image.</p><p>The clock and score are shown on the right side of the page.</p><p>For range type question, drag the pointer to the appropriate location.</p><p>For drag and drop type question, drag the answer block to the answer box below the options.</p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div></div></div></div></div><script>function preventBack(){window.history.forward();}\r\n  setTimeout("preventBack()", 0);\r\n  window.onunload=function(){null};</script>'),a.put("app/report/report.html",'<div class=report-container><div class=background-sheet></div><div class="content-block container-fluid"><div class=section><div ng-include="\'components/navbar/navbar.html\'"></div><div class="main-block container"><div class=row><div class=col-md-12><div class=title-block><p>Report</p><p>{{user.name}} <span>({{user.email}})</span></p><i class="fa fa-cogs"></i></div></div></div></div><div class="container colorful-line"><div class=row><div class="col-md-3 col-xs-3" id=color1></div><div class="col-md-3 col-xs-3" id=color2></div><div class="col-md-3 col-xs-3" id=color3></div><div class="col-md-3 col-xs-3" id=color4></div></div></div><div class="report-container container"><div class=container-fluid><ol class=breadcrumb-container><li><a href=/#/profile>Profile</a></li><li><a href="">report</a></li></ol><hr><div class=row><div class=col-md-8><table class=report-table><tbody><tr><td><p>Lab:</p></td><td><p>{{lab.labname}}</p></td></tr><tr><td><p>Quiz:</p></td><td><p>{{(lab.quizzes | filter:{id:report.quizid})[0].quizname }}</p></td></tr><tr><td><p>Score:</p></td><td><p>{{report.score | number : 2}} on {{report.subanswers.length*10 | number : 2}}</p></td></tr><tr><td><p>Time:</p></td><td><p>{{ Math.floor( report.clock/60 ) | number : 0}} Minutes {{report.clock % 60}} Seconds</p></td></tr><tr><td><p>Date:</p></td><td><p>{{report.date | date}}</p></td></tr></tbody></table></div><div class=col-md-4><p class=message ng-if="score.percent >= 75">Well Done!</p><p class=message ng-if="score.percent >= 50 && score.percent < 75">Average!</p><p class=message ng-if="score.percent < 50">Try Again!</p></div></div><br><hr><div class="row stats-container"><div class="col-md-4 col-sm-4"><p>ATTEMPTED</p><p>(Total {{report.subanswers.length}})</p><div class=donut-container><donut val=attempted></donut></div></div><div class="col-md-4 col-sm-4"><p>SCORE</p><p>(Total {{report.subanswers.length*10}})</p><div class=donut-container><donut val=score></donut></div></div><div class="col-md-4 col-sm-4"><p>AVG TIME</p><p>(in Minutes)</p><div class=donut-container><donut val=time></donut></div></div></div><hr><div class=button-section><a href=/#/consent/{{lab.id}}/{{quiz.id}}>Re-take Test</a> <a href=/#/profile>Go to Profile</a></div></div></div></div></div></div>'),a.put("components/navbar/navbar.html",'<div ng-controller=HeaderCtrl><header><div class="header-block clearfix container"><div class=logo-block><div class=logo-icon><img src="assets/images/svg/7258eb95.logo.svg"></div><div class=logo-text>Discovery</div></div><div ng-if=!isQuiz class="menu-block hidden-xs"><ul><li><a href=labs>home</a></li><li><a href=profile>profile</a></li><li class=signout><a href="" ng-click=logoutall()>Sign Out</a></li></ul></div><div ng-if=isQuiz class="menu-block hidden-xs"><ul><li class=signout><a href="" data-toggle=modal data-target=#signoutModal>Sign Out</a></li></ul></div><div class="mobile-menu visible-xs"><i class="fa fa-bars"></i></div></div></header><!-- Submit Modal --><div class="modal fade" id=signoutModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title id=myModalLabel>Sign Out Confirmation</h4></div><div class=modal-body>Are you Sure? The quiz will not be submitted if you sign out now.</div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-info" ng-click=logout()>Sign Out</button></div></div></div></div><script type=text/ng-template id=warning-dialog.html><div class="modal-header">\r\n      <h3>You\'re Idle. Do Something!</h3>\r\n    </div>\r\n    <div ng-idle-countdown="countdown" ng-init="countdown=30" class="modal-body">\r\n      <!--<progressbar class="progress-striped active" animate="true" max="30" value="countdown" type="danger">{{countdown}}</progressbar>\r\n      <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="{{countdown}}" aria-valuemin="0" aria-valuemax="5" style="width: {{countdown/5 * 100}}%;"></div>-->\r\n      <p class="idle-message">You\'ll be logged out in <span>{{countdown}}</span> seconds.</p>\r\n    </div></script><script type=text/ng-template id=timedout-dialog.html><div class="modal-header">\r\n      <h3>You\'ve Timed Out!</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n      <p>\r\n        You were idle too long. So we are logging you out!.\r\n      </p>\r\n    </div></script></div>')}]);